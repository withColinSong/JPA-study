# 목차
- [목차](#목차)
- [1. 엔티티 매핑 소개](#1-엔티티-매핑-소개)
  - [1.1. Entity](#11-entity)
- [2. 양방향 연관관계와 연관관계의 주인](#2-양방향-연관관계와-연관관계의-주인)
  - [2.1. 양방향일 때 외래키를 어떻게 관리할 것인지?](#21-양방향일-때-외래키를-어떻게-관리할-것인지)
  - [2.2 양방향 주의점](#22-양방향-주의점)
    - [2.2.1. 무한루프 방지](#221-무한루프-방지)
  - [3. 정리](#3-정리)

# 1. 엔티티 매핑 소개
- 객체와 테이블 매핑: @Entity, @Table
- 필드와 컬럼 매핑: @Column
- 기본 키 매핑: @Id
- 연관관계 매핑: @ManyToOne, @JoinColumn

## 1.1. Entity
- @Entity가 붙은 클래스는 JPA과 관리. 엔티티라 한다.
- JPA를 사용해서 테이블과 매핑할 클래스는 @Entity 필수
- 기본 생성자 필수
- final 클래스, enum, interface, inner 클래스를 사용할 수 없다.
- 저장할 필드에 final 사용 X


# 2. 양방향 연관관계와 연관관계의 주인

```java
# Team Class
@OneToMany(mappedBy = "team")
List<Member> members = new ArrayList<>(); 
```

## 2.1. 양방향일 때 외래키를 어떻게 관리할 것인지?
- 외래키가 있는 곳을 주인으로 정하자.
- 가짜 맵핑은 읽기 전용.

## 2.2 양방향 주의점
- 양방향 매핑 시 항상 양쪽에 값을 넣는다.
- 연관관계 편의 메서드를 만든다.
```java
# Member Class
public void ChangeTeam(Team team) {
   this.team = team;
   team.getTeam().add(this);
}
```
-  한곳에서만 편의 메서드를 생성하자.
- Lombok, toString(), JSON 생성 라이브시 무한루프가 될 수 있다.

### 2.2.1. 무한루프 방지 
- entity 반환 하지 않도록 한다. (dto 이용)
- toString 사용시 양방향 맵핑의 제거 후 사용한다.

## 3. 정리
- 단방향 매핑으로만 설계한다.
- 양방향은 필요할 때 추가해도 됨.